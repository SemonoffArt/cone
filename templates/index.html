<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–∞—Å—á—ë—Ç –û–±—ä—ë–º–∞ –ö–æ–Ω—É—Å–∞</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å: Canvas -->
        <div class="canvas-panel">
            <div class="toolbar">
                <button id="load-file-btn" class="btn btn-primary">üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª</button>
                <button id="load-zif1-btn" class="btn btn-secondary">üì∑ –ó–ò–§-1</button>
                <button id="load-zif2-btn" class="btn btn-secondary">üì∑ –ó–ò–§-2</button>
                <button id="auto-build-btn" class="btn btn-success">ü§ñ –ê–≤—Ç–æ-–ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ</button>
                <button id="clear-btn" class="btn btn-danger">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
                <button id="calculate-btn" class="btn btn-primary">üìä –†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
                <span class="toolbar-separator"></span>
                <button id="zoom-in-btn" class="btn btn-zoom" title="–£–≤–µ–ª–∏—á–∏—Ç—å">üîç+</button>
                <button id="zoom-out-btn" class="btn btn-zoom" title="–£–º–µ–Ω—å—à–∏—Ç—å">üîç‚àí</button>
                <button id="zoom-reset-btn" class="btn btn-zoom" title="–°–±—Ä–æ—Å –º–∞—Å—à—Ç–∞–±–∞">‚Ü∫</button>
            </div>
            
            <div class="canvas-container">
                <canvas id="main-canvas"></canvas>
            </div>
            
            <div class="status-bar">
                <span id="status-text">–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</span>
            </div>
            
            <input type="file" id="file-input" accept="image/*" style="display: none;">
        </div>
        
        <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
        <div class="info-panel">
            <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
            
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω—É—Å–µ -->
            <div class="info-section">
                <h3>–ö–æ–Ω—É—Å:</h3>
                <div class="info-value large" id="volume-value">–û–±—ä–µ–º: -</div>
                <div class="info-value large" id="mass-value">–ú–∞—Å—Å–∞: -</div>
                <div class="info-value" id="params-value">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—É—Å–∞: -</div>
                <div class="formula">–§–æ—Ä–º—É–ª–∞: V = ‚ÖìœÄR¬≤h*k</div>
            </div>
            
            <hr>
            
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ -->
            <div class="info-section">
                <h3>–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫:</h3>
                <div class="info-value" id="side-ab">–°—Ç–æ—Ä–æ–Ω–∞ AB: -</div>
                <div class="info-value" id="side-bc">–°—Ç–æ—Ä–æ–Ω–∞ BC: -</div>
                <div class="info-value" id="side-ca">–°—Ç–æ—Ä–æ–Ω–∞ CA: -</div>
            </div>
            
            <hr>
            
            <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
            <div class="info-section">
                <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏:</h3>
                
                <div class="setting-row">
                    <label for="pixel-size">–†–∞–∑–º–µ—Ä –ø–∏–∫—Å–µ–ª—è (–º):</label>
                    <input type="number" id="pixel-size" step="0.001" value="{{ cam_zif1.pixel_size_m }}">
                </div>
                
                <div class="setting-row">
                    <label for="k-vol">–ö–æ—ç—Ñ—Ñ. –æ–±—ä—ë–º–∞:</label>
                    <input type="number" id="k-vol" step="0.01" value="{{ cam_zif1.k_vol }}">
                </div>
                
                <div class="setting-row">
                    <label for="k-den">–ü–ª–æ—Ç–Ω–æ—Å—Ç—å (—Ç/–º¬≥):</label>
                    <input type="number" id="k-den" step="0.1" value="{{ cam_zif1.k_den }}">
                </div>
                
                <div class="setting-row">
                    <label for="threshold">–ü–æ—Ä–æ–≥ –±–∏–Ω–∞—Ä–∏–∑–∞—Ü–∏–∏:</label>
                    <input type="number" id="threshold" min="0" max="255" value="{{ cam_zif1.threshold }}">
                </div>
            </div>
            
            <hr>
            
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏ -->
            <div class="info-section">
                <h3>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:</h3>
                <div class="info-value" id="image-size">–†–∞–∑–º–µ—Ä: -</div>
                <div class="info-value" id="image-source">–ò—Å—Ç–æ—á–Ω–∏–∫: -</div>
                <div class="info-value" id="image-display">–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: -</div>
            </div>
            
            <hr>
            
            <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ -->
            <div class="info-section">
                <button id="settings-btn" class="btn btn-secondary full-width">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–º–µ—Ä</button>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–º–µ—Ä</h2>
            
            <div class="tabs">
                <button class="tab-btn active" data-tab="zif1">–ó–ò–§-1</button>
                <button class="tab-btn" data-tab="zif2">–ó–ò–§-2</button>
            </div>
            
            <div id="zif1-tab" class="tab-content active">
                <h3>–ö–æ–Ω—É—Å –ó–ò–§-1</h3>
                <div class="setting-row">
                    <label>IP –∞–¥—Ä–µ—Å Trassir:</label>
                    <input type="text" id="zif1-ip" value="{{ cam_zif1.trassir_ip }}">
                </div>
                <div class="setting-row">
                    <label>–ò–º—è –∫–∞–Ω–∞–ª–∞:</label>
                    <input type="text" id="zif1-channel" value="{{ cam_zif1.chanel_name }}">
                </div>
                <div class="setting-row">
                    <label>–ü–∞—Ä–æ–ª—å:</label>
                    <input type="password" id="zif1-password" value="{{ cam_zif1.password }}">
                </div>
                <div class="setting-row">
                    <label>–†–∞–∑–º–µ—Ä –ø–∏–∫—Å–µ–ª—è (–º):</label>
                    <input type="number" id="zif1-pixel-size" step="0.001" value="{{ cam_zif1.pixel_size_m }}">
                </div>
                <div class="setting-row">
                    <label>–ö–æ—ç—Ñ—Ñ. –æ–±—ä—ë–º–∞:</label>
                    <input type="number" id="zif1-k-vol" step="0.01" value="{{ cam_zif1.k_vol }}">
                </div>
                <div class="setting-row">
                    <label>–ü–ª–æ—Ç–Ω–æ—Å—Ç—å (—Ç/–º¬≥):</label>
                    <input type="number" id="zif1-k-den" step="0.1" value="{{ cam_zif1.k_den }}">
                </div>
                <div class="setting-row">
                    <label>–ü–æ—Ä–æ–≥ –±–∏–Ω–∞—Ä–∏–∑–∞—Ü–∏–∏:</label>
                    <input type="number" id="zif1-threshold" value="{{ cam_zif1.threshold }}">
                </div>
            </div>
            
            <div id="zif2-tab" class="tab-content">
                <h3>–ö–æ–Ω—É—Å –ó–ò–§-2</h3>
                <div class="setting-row">
                    <label>IP –∞–¥—Ä–µ—Å Trassir:</label>
                    <input type="text" id="zif2-ip" value="{{ cam_zif2.trassir_ip }}">
                </div>
                <div class="setting-row">
                    <label>–ò–º—è –∫–∞–Ω–∞–ª–∞:</label>
                    <input type="text" id="zif2-channel" value="{{ cam_zif2.chanel_name }}">
                </div>
                <div class="setting-row">
                    <label>–ü–∞—Ä–æ–ª—å:</label>
                    <input type="password" id="zif2-password" value="{{ cam_zif2.password }}">
                </div>
                <div class="setting-row">
                    <label>–†–∞–∑–º–µ—Ä –ø–∏–∫—Å–µ–ª—è (–º):</label>
                    <input type="number" id="zif2-pixel-size" step="0.001" value="{{ cam_zif2.pixel_size_m }}">
                </div>
                <div class="setting-row">
                    <label>–ö–æ—ç—Ñ—Ñ. –æ–±—ä—ë–º–∞:</label>
                    <input type="number" id="zif2-k-vol" step="0.01" value="{{ cam_zif2.k_vol }}">
                </div>
                <div class="setting-row">
                    <label>–ü–ª–æ—Ç–Ω–æ—Å—Ç—å (—Ç/–º¬≥):</label>
                    <input type="number" id="zif2-k-den" step="0.1" value="{{ cam_zif2.k_den }}">
                </div>
                <div class="setting-row">
                    <label>–ü–æ—Ä–æ–≥ –±–∏–Ω–∞—Ä–∏–∑–∞—Ü–∏–∏:</label>
                    <input type="number" id="zif2-threshold" value="{{ cam_zif2.threshold }}">
                </div>
            </div>
            
            <div class="modal-buttons">
                <button id="save-settings-btn" class="btn btn-primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button id="cancel-settings-btn" class="btn btn-secondary">‚ùå –û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
