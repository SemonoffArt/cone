# üåê Web-–≤–µ—Ä—Å–∏—è Cone Volume Calculator

## –û–ø–∏—Å–∞–Ω–∏–µ

Web-–≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –æ–±—ä—ë–º–∞ –∫–æ–Ω—É—Å–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Flask** –∏ **Jinja2**. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –ó–∞–≥—Ä—É–∂–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ —Å –∫–∞–º–µ—Ä Trassir
- –°—Ç—Ä–æ–∏—Ç—å —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ –≤—Ä—É—á–Ω—É—é (–∫–ª–∏–∫–∞–º–∏ –º—ã—à–∏)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –æ–±—ä—ë–º –∏ –º–∞—Å—Å—É –∫–æ–Ω—É—Å–∞
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞–º–µ—Ä

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
cone/
‚îú‚îÄ‚îÄ web_app.py              # Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (backend)
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îî‚îÄ‚îÄ index.html          # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (Jinja2 —à–∞–±–ª–æ–Ω)
‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ style.css       # –°—Ç–∏–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îÇ       ‚îî‚îÄ‚îÄ app.js          # JavaScript –ª–æ–≥–∏–∫–∞ (frontend)
‚îî‚îÄ‚îÄ uploads/                # –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∑–∫–∏
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd c:\Users\7Arrt\Desktop\Projects\cone
uv sync
```

### 2. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
python web_app.py
```

### 3. –û—Ç–∫—Ä—ã—Ç–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

```
http://127.0.0.1:5000
```

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### üñºÔ∏è –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

- **–õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª**: –ö–Ω–æ–ø–∫–∞ "üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª"
- **Trassir –ó–ò–§-1**: –ö–Ω–æ–ø–∫–∞ "üì∑ –ó–ò–§-1"
- **Trassir –ó–ò–§-2**: –ö–Ω–æ–ø–∫–∞ "üì∑ –ó–ò–§-2"

### üìê –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞

1. **–í—Ä—É—á–Ω—É—é**: 
   - –ö–ª–∏–∫–Ω–∏—Ç–µ 3 —Ä–∞–∑–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤–µ—Ä—à–∏–Ω
   - –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–π—Ç–µ –≤–µ—Ä—à–∏–Ω—ã –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**: 
   - –ö–Ω–æ–ø–∫–∞ "ü§ñ –ê–≤—Ç–æ-–ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ"
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ—Ä–æ–≥ –±–∏–Ω–∞—Ä–∏–∑–∞—Ü–∏–∏ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö

### üìä –†–∞—Å—á—ë—Ç

1. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ (3 –≤–µ—Ä—à–∏–Ω—ã)
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
   - –†–∞–∑–º–µ—Ä –ø–∏–∫—Å–µ–ª—è (–º)
   - –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –æ–±—ä—ë–º–∞
   - –ü–ª–æ—Ç–Ω–æ—Å—Ç—å (—Ç/–º¬≥)
3. –ù–∞–∂–º–∏—Ç–µ "üìä –†–∞—Å—Å—á–∏—Ç–∞—Ç—å"

### ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–º–µ—Ä

–ö–Ω–æ–ø–∫–∞ "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–º–µ—Ä" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
- IP –∞–¥—Ä–µ—Å Trassir
- –ò–º—è –∫–∞–Ω–∞–ª–∞
- –ü–∞—Ä–æ–ª—å
- –†–∞–∑–º–µ—Ä –ø–∏–∫—Å–µ–ª—è
- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –æ–±—ä—ë–º–∞ –∏ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏
- –ü–æ—Ä–æ–≥ –±–∏–Ω–∞—Ä–∏–∑–∞—Ü–∏–∏

## API Endpoints

### `GET /`
–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### `POST /upload`
–ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
```json
{
  "file": File
}
```

### `POST /load_trassir/<cone_type>`
–ó–∞–≥—Ä—É–∑–∫–∞ —Å Trassir (ZIF1 –∏–ª–∏ ZIF2)

### `POST /auto_detect`
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞
```json
{
  "threshold": 50,
  "roi": [x1, x2, y1, y2],
  "cone_center": [min%, max%]
}
```

### `POST /calculate`
–†–∞—Å—á—ë—Ç –æ–±—ä—ë–º–∞ –∫–æ–Ω—É—Å–∞
```json
{
  "vertices": [[x1, y1], [x2, y2], [x3, y3]],
  "pixel_size": 0.1,
  "k_vol": 1.0,
  "k_den": 1.7
}
```

### `GET /config`
–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### `POST /config`
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```json
{
  "camera_name": "CAM_CONE_ZIF1",
  "config": {
    "trassir_ip": "10.100.59.11",
    "chanel_name": "–ó–ò–§-1 17. –ò–∑–º–µ–ª—å—á–µ–Ω–∏–µ –∫—É–ø–æ–ª",
    "password": "master",
    "pixel_size_m": 0.091,
    "k_vol": 0.35,
    "k_den": 1.7,
    "threshold": 50
  }
}
```

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### Backend
- **Flask 3.0+**: Web-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Jinja2**: –®–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä
- **PIL/Pillow**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **OpenCV**: –ö–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–µ –∑—Ä–µ–Ω–∏–µ
- **Requests**: HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è Trassir

### Frontend
- **HTML5 Canvas**: –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞
- **Vanilla JavaScript**: –õ–æ–≥–∏–∫–∞ UI
- **CSS3**: –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è (–≥—Ä–∞–¥–∏–µ–Ω—Ç—ã, –∞–Ω–∏–º–∞—Ü–∏–∏)
- **AJAX/Fetch API**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### üé® –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ñ–æ–Ω
- –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã
- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
- Hover —ç—Ñ—Ñ–µ–∫—Ç—ã –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö

### üñ±Ô∏è Canvas –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
- –ö–ª–∏–∫–∏ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ä—à–∏–Ω
- Drag & Drop –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –≤–µ—Ä—à–∏–Ω
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª–∏–Ω —Å—Ç–æ—Ä–æ–Ω
- –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

### üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Tkinter –≤–µ—Ä—Å–∏–µ–π
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ –∂–µ –º–æ–¥—É–ª–∏ —Ä–∞—Å—á—ë—Ç–æ–≤ (`core/`)
- –°–æ–≤–º–µ—Å—Ç–∏–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`config.json`)
- –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã (`utils/`)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### `web_app.py` (Backend)
```python
# Flask routes:
- /                    # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- /upload             # –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
- /load_trassir       # Trassir
- /auto_detect        # –ê–≤—Ç–æ-–ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ
- /calculate          # –†–∞—Å—á—ë—Ç
- /config             # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
```

### `static/js/app.js` (Frontend)
```javascript
// –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- loadImageToCanvas()      # –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- handleCanvasClick()      # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—à–∏–Ω
- handleMouseMove()        # –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
- autoDetectTriangle()     # –ê–≤—Ç–æ-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
- calculateVolume()        # –†–∞—Å—á—ë—Ç
- displayResults()         # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```

### `static/css/style.css` (Styles)
```css
/* –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: */
- .container           # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- .canvas-panel        # –ü–∞–Ω–µ–ª—å —Å canvas
- .info-panel          # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å
- .modal               # –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
- .btn                 # –ö–Ω–æ–ø–∫–∏ (primary, secondary, success, danger)
```

## –û—Ç–ª–∏—á–∏—è –æ—Ç Tkinter –≤–µ—Ä—Å–∏–∏

| –§—É–Ω–∫—Ü–∏—è | Tkinter | Web |
|---------|---------|-----|
| –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ | Desktop | Browser |
| UI —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ | Tkinter | HTML/CSS/JS |
| –®–∞–±–ª–æ–Ω—ã | –ù–µ—Ç | Jinja2 |
| –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ | Canvas |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∏ | –î–∏–∞–ª–æ–≥ | –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ |
| –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ | .exe | URL |

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Web-–≤–µ—Ä—Å–∏–∏

‚úÖ **–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å**: –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª—é–±–æ–π –û–° —Å –±—Ä–∞—É–∑–µ—Ä–æ–º  
‚úÖ **–£–¥–∞–ª—ë–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø**: –î–æ—Å—Ç—É–ø–Ω–æ –ø–æ —Å–µ—Ç–∏  
‚úÖ **–ù–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏**: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ  
‚úÖ **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI**: –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã, –∞–Ω–∏–º–∞—Ü–∏–∏, –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å  
‚úÖ **–õ—ë–≥–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ä–∞–∑—É –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º  

## Production Deploy

–î–ª—è production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ WSGI —Å–µ—Ä–≤–µ—Ä:

### Gunicorn (Linux/Mac)
```bash
pip install gunicorn
gunicorn -w 4 -b 0.0.0.0:5000 web_app:app
```

### Waitress (Windows)
```bash
pip install waitress
waitress-serve --host=0.0.0.0 --port=5000 web_app:app
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

---

**–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ**: 2026  
**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: Flask, Jinja2, HTML5 Canvas, JavaScript, Python 3.13+
